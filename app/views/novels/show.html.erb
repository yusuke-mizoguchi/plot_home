<% content_for(:topic, t('.topic')) %>
<div class="container">
  <div class="row">
    <div class="col-lg-8 offset-lg-2">
      <h1><%= t('.topic') %></h1>
      <article class="card">
        <div class="card-body">
          <div class='row'>
            <div>
              <h3 class="d-inline"><%= @novel.title %></h3>
              <%= render 'crud_menus', novel: @novel if current_user.own?(@novel) %>
              <ul class="list-inline">
                <li class="list-inline-item"><%= t('.author') %>：<%= link_to @novel.user.name, user_path(@novel.user.id) %></li>
                <li class="list-inline-item"><%= t('attributes.created_at') %>：<%= l @novel.created_at, format: :long %></li>
              </ul>
              <ul class="list-inline">
                <li class="list-inline-item"><%= t('activerecord.attributes.novel.genre') %>：<%= @novel.genre %></li>
                <li class="list-inline-item"><%= t('activerecord.attributes.novel.story_length') %>：<%= @novel.story_length %></li>
              </ul>
              <h5><%= t('activerecord.attributes.novel.plot') %></h5>
              <p><%= simple_format(@novel.plot) %></p>
              <% unless @novel.characters.blank? %>
                <h5><%= t('.character_text') %></h5>
              <% end %>
              <% @novel.characters.each do |c| %>
                <p><%= simple_format(c.character_role) %></p>
                <p><%= simple_format(c.character_text) %></p>
              <% end %>
            </div>
          </div>
        </div>
      </article>
    </div>
  </div>

  <% unless current_user.id == @novel.user.id %>
    <!-- レビューフォーム -->
    <%= render 'reviews/form', { novel: @novel, review: @review } %>
  <% end %>
  <!-- レビューエリア -->
  <%= render 'reviews/reviews', { reviews: @reviews } %>
</div>
